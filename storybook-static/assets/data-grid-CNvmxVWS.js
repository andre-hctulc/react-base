import{j as i}from"./jsx-runtime-ClZEHPQQ.js";import{I as V,w as G,a as T}from"./title-zhG8nq35.js";import{I as $,S as ie}from"./icon-button-CnPy7BkC.js";import{C as se,b as oe,u as Z}from"./use-persistent-state-3RrTVDUf.js";import{R as D,r as c}from"./index-Cqyox1Tj.js";import{P as U,u as le}from"./popover-GB_-jwkC.js";import{S as de}from"./subtitle-B8FNKHlk.js";import{S as ce,a as F}from"./select-wEauhckA.js";import{P as me}from"./placeholder-CvNBklpY.js";const j=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},A=new Set(["__proto__","prototype","constructor"]),ue=new Set("0123456789");function Q(e){const t=[];let r="",a="start",n=!1;for(const s of e)switch(s){case"\\":{if(a==="index")throw new Error("Invalid character in an index");if(a==="indexEnd")throw new Error("Invalid character after an index");n&&(r+=s),a="property",n=!n;break}case".":{if(a==="index")throw new Error("Invalid character in an index");if(a==="indexEnd"){a="property";break}if(n){n=!1,r+=s;break}if(A.has(r))return[];t.push(r),r="",a="property";break}case"[":{if(a==="index")throw new Error("Invalid character in an index");if(a==="indexEnd"){a="index";break}if(n){n=!1,r+=s;break}if(a==="property"){if(A.has(r))return[];t.push(r),r=""}a="index";break}case"]":{if(a==="index"){t.push(Number.parseInt(r,10)),r="",a="indexEnd";break}if(a==="indexEnd")throw new Error("Invalid character after an index")}default:{if(a==="index"&&!ue.has(s))throw new Error("Invalid character in an index");if(a==="indexEnd")throw new Error("Invalid character after an index");a==="start"&&(a="property"),n&&(n=!1,r+="\\"),r+=s}}switch(n&&(r+="\\"),a){case"property":{if(A.has(r))return[];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function K(e,t){if(typeof t!="number"&&Array.isArray(e)){const r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function fe(e,t){if(K(e,t))throw new Error("Cannot use string index")}function he(e,t,r){if(!j(e)||typeof t!="string")return r===void 0?e:r;const a=Q(t);if(a.length===0)return r;for(let n=0;n<a.length;n++){const s=a[n];if(K(e,s)?e=n===a.length-1?void 0:null:e=e[s],e==null){if(n!==a.length-1)return r;break}}return e===void 0?r:e}function ge(e,t,r){if(!j(e)||typeof t!="string")return e;const a=e,n=Q(t);for(let s=0;s<n.length;s++){const o=n[s];fe(e,o),s===n.length-1?e[o]=r:j(e[o])||(e[o]=typeof n[s+1]=="number"?[]:{}),e=e[o]}return a}function we(e,t){return D.useMemo(()=>e.map(t),[e])}function ye(e){const t=c.useRef(e);return c.useEffect(()=>{t.current=e},[e]),t}const M=D.forwardRef((e,t)=>i.jsx(V,{ref:t,...e,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"})})}));M.displayName=G("GearIcon");M.__docgenInfo={description:"",methods:[],composes:["Omit"]};const X=({icon:e,cols:t,hiddenCols:r,onChange:a})=>{const n=D.useRef(null),[s,o]=D.useState(!1),d=c.useMemo(()=>t.filter(l=>l.hidable!==!1).map(l=>({label:l.label,value:l.path,data:l})),[t]),N=c.useMemo(()=>{const l=new Set(r);return t.filter(h=>!l.has(h.path)).map(h=>h.path)},[t,r]);return i.jsxs(i.Fragment,{children:[i.jsx($,{ref:n,size:"sm",color:"neutral",variant:"text",onClick:l=>{l.stopPropagation(),o(!0)},children:e||i.jsx(M,{})}),i.jsx(U,{anchor:n.current,open:s,onClose:()=>{o(!1)},zIndex:"20",position:"left-start",children:i.jsx(se,{width:"sm",onClick:l=>{console.log("test")},children:i.jsxs(oe,{children:[i.jsx(de,{mb:"sm",variant:"h3",children:"Columns"}),i.jsx(ce,{placeholder:"Select columns to show",multiple:!0,options:d,value:N,onChange:({value:l})=>{const h=new Set(l);a==null||a(t.filter(y=>!h.has(y.path)&&y.hidable!==!1).map(y=>y.path))}})]})})})]})};X.__docgenInfo={description:"",methods:[],displayName:"DataGridSettings",props:{icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},hiddenCols:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},cols:{required:!0,tsType:{name:"Array",elements:[{name:"DataGridColDef",elements:[{name:"any"}],raw:"DataGridColDef<any>"}],raw:"DataGridColDef<any>[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(hiddenCols: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"hiddenCols"}],return:{name:"void"}}},description:""}}};const _=D.forwardRef((e,t)=>i.jsx(V,{ref:t,...e,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M112,60a16,16,0,1,1,16,16A16,16,0,0,1,112,60Zm16,52a16,16,0,1,0,16,16A16,16,0,0,0,128,112Zm0,68a16,16,0,1,0,16,16A16,16,0,0,0,128,180Z"})})}));_.displayName=G("MoreVert");_.__docgenInfo={description:"",methods:[],composes:["Omit"]};const J=({row:e,moreIcon:t,render:r})=>{const[a,n]=D.useState(!1),s=D.useRef(null);return i.jsxs(i.Fragment,{children:[i.jsx($,{size:"sm",color:"neutral",variant:"text",onClick:o=>{o.stopPropagation(),n(!0)},ref:s,children:t||i.jsx(_,{})}),i.jsx(U,{anchor:s.current,open:a,onClose:()=>n(!1),zIndex:"10",position:"bottom-end",children:r?r(e):i.jsx("i",{className:"text-t2 text-sm px-4 py-2",children:"No actions"})})]})};J.__docgenInfo={description:"",methods:[],displayName:"DataGridActions"};const Y=({children:e,style:t,className:r})=>i.jsx("span",{className:T("inline-block py-2 truncate font-light align-middle max-w-full",r),style:t,children:e===void 0?"":String(e)});Y.__docgenInfo={description:"",methods:[],displayName:"DataGridCellText"};const pe=100;function q(e){let t=e.width||pe;return e.maxWidth&&(t=Math.min(t,e.maxWidth)),e.minWidth&&(t=Math.max(t,e.minWidth)),t}const ee=({value:e,col:t,onClick:r,cols:a,row:n,selected:s,hoverEffect:o,leftEnd:d,rightEnd:N})=>{const l=c.useMemo(()=>q(t),[t]),[h,y]=c.useMemo(()=>{if(!t.stickyLeft)return[void 0,!1];let g=0,p,x=!0;for(const f of a)f===t&&(x=!1),f.stickyLeft&&(x&&(g+=q(f)),p=f);return[g,p===t]},[a,t]),[k,b]=c.useMemo(()=>{if(!t.stickyRight)return[void 0,!1];let g=0,p=!0,x;for(const f of a.reverse())f===t&&(p=!1),f.stickyRight&&(x||(x=f),p&&(g+=q(f)+1));return[g,x===t]},[a,t]),E=t.stickyLeft||t.stickyRight,C=t.alignCenter||t.justifyCenter||t.center;return i.jsx("div",{className:T("bg-paper transition-shadow",E&&"z-1",t.stickyLeft&&"sticky left-0 order-[-1]",t.stickyRight&&"sticky right-0 order-1",b&&"ml-auto",y&&!d&&"shadow-sm",b&&!N&&"shadow-sm"),style:{minWidth:l,maxWidth:l,left:h,right:k},onClick:g=>r==null?void 0:r(e,n,t,g),children:i.jsx("div",{className:T("overflow-hidden px-1 w-full h-full box-border ",o&&"group-hover:bg-primary/5",s&&"bg-primary/10",C&&"flex",(t.alignCenter??t.center)&&"items-center",(t.justifyCenter??t.center)&&"justify-center",t.className),children:t.render?t.render(e,n,t):i.jsx(Y,{children:t.stringify?t.stringify(e,n,t):e})})})};ee.__docgenInfo={description:"",methods:[],displayName:"DataGridCell"};const P=({row:e,cols:t,className:r,onCellClick:a,onClick:n,height:s,...o})=>i.jsx("div",{className:T("group shrink-0 flex relative border-b-[0.5px]",n&&"cursor-pointer",r,o.hoverEffect&&"hover:bg-primary/5",o.selected&&"bg-primary/10"),onClick:d=>n==null?void 0:n(e,d),style:{height:s,maxHeight:s},children:t.map(d=>i.jsx(ee,{cols:t,row:e,col:d,onClick:a,value:he(e,d.path),...o},d.path))});P.__docgenInfo={description:"",methods:[],displayName:"DataGridRow"};const te=({cols:e,height:t,rightEnd:r,leftEnd:a})=>{const n=we(e,(o,d,N)=>({...o,className:T("text-sm text-t3",o.headerCellClassName),render:typeof o.label=="string"?()=>i.jsx("div",{className:"py-2 truncate font-light",children:o.label}):()=>o.label})),s=c.useMemo(()=>{const o={};return e.forEach(d=>{ge(o,d.path,d.label)}),o},[e]);return i.jsx(P,{rightEnd:r,leftEnd:a,className:"bg-paper z-2 w-full! flex rounded-t-lg border-b! top-0 sticky",row:s,cols:n,hoverEffect:!1,selected:!1,height:t})};te.__docgenInfo={description:"",methods:[],displayName:"DataGridHeaderRow"};const ne=({className:e})=>i.jsx("div",{className:e});ne.__docgenInfo={description:"",methods:[],displayName:"DataGridFooter"};const xe=e=>{var f,H,W,z;const t=ye(e.rowId),r=c.useId(),a=((f=e.storage)==null?void 0:f.id)??r,[n,s]=c.useState([]),o=c.useMemo(()=>new Set(n.map(m=>t.current(m))),[n]),[d,N]=Z(G("data-grid-hide-cols_")+a,e.defaultHideCols||[],((H=e.storage)==null?void 0:H.engine)||Z.memoryStorage),l=e.rows.length,h=l===0,[y,k]=c.useState(!0),[b,E]=c.useState(!0),C=c.useRef(null),g=c.useMemo(()=>{var S;const m=[...e.cols],w=e.settings!==!1;(e.rowActionCellPopover||e.rowActionCell||w)&&m.push({hidable:!1,label:w&&i.jsx(X,{cols:m,hiddenCols:d,icon:(S=e.components)==null?void 0:S.settingsIcon,onChange:u=>N(u)}),render:e.rowActionCell||((u,R,L)=>{var I;return e.rowActionCellPopover&&i.jsx(J,{moreIcon:(I=e.components)==null?void 0:I.moreIcon,render:e.rowActionCellPopover,row:R})}),path:"$actions$",width:50,className:"flex justify-center items-center",headerCellClassName:"flex justify-center items-center",stickyRight:!0}),e.selectable&&m.unshift({label:e.selectAll===!1?"":i.jsx(F,{size:"sm",value:n.length===l,onChange:({value:u})=>{var L;const R=u?e.rows:[];s(R),(L=e.onSelectionChange)==null||L.call(e,R)},onClick:u=>u.stopPropagation()}),path:"$select$",width:50,hidable:!1,className:"flex justify-center items-center",headerCellClassName:"flex justify-center items-center",render:(u,R,L)=>i.jsx(F,{size:"sm",value:o.has(t.current(R)),onChange:({value:I})=>{var O;const re=t.current(R),B=I?[...n,R]:n.filter(ae=>t.current(ae)!==re);s(B),(O=e.onSelectionChange)==null||O.call(e,B)},onClick:I=>I.stopPropagation()}),stickyLeft:!0});const v=new Set(d);return m.filter(u=>!v.has(u.path)).map(u=>({...e.baseColDef,...u}))},[e.cols,d,e.rowActionCellPopover,e.rowActionCell,e.selectable,e.selectAll,o,e.rows,n]),p=()=>{if(!C.current)return;if(!(C.current.scrollWidth>C.current.clientWidth)){E(!0),k(!0);return}const w=C.current,v=w.scrollLeft,S=w.scrollWidth,u=w.clientWidth;E(v===0),k(v+u===S)};c.useEffect(()=>{p()},[e.cols,e.rows]),le("resize",()=>{p()}),c.useEffect(()=>{var v;const m=new Set(e.rows.map(t.current)),w=n.filter(S=>m.has(t.current(S)));w.length!==n.length&&(s(w),(v=e.onSelectionChange)==null||v.call(e,w))},[e.rows]);const x=h||e.loading;return i.jsxs("div",{className:T("bg-paper flex flex-col relative overflow-y-auto min-h-0",x&&"min-h-40",e.className),children:[x&&i.jsx(me,{className:"absolute w-full h-full left-0",children:e.loading?((z=e.components)==null?void 0:z.loading)||i.jsx(ie,{size:"2xl"}):h&&(((W=e.components)==null?void 0:W.empty)||"No data found")}),i.jsx("div",{className:T("grow overflow-x-auto relative flex flex-col"),style:{},ref:C,onScroll:()=>p(),children:i.jsxs("div",{className:"shrink-0",style:{minWidth:"min-content"},children:[i.jsx(te,{leftEnd:b,rightEnd:y,cols:g,height:e.headerRowHeight}),!e.loading&&l>0&&e.rows.map(m=>i.jsx(P,{leftEnd:b,rightEnd:y,height:e.rowHeight,selected:o.has(t.current(m)),row:m,cols:g,hoverEffect:!0,onClick:e.onRowClick,onCellClick:e.onCellClick},e.rowId(m)))]})}),i.jsx(ne,{})]})};xe.__docgenInfo={description:"",methods:[],displayName:"DataGrid",props:{className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},rows:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},cols:{required:!0,tsType:{name:"Array",elements:[{name:"DataGridColDef",elements:[{name:"T"}],raw:"DataGridColDef<T>"}],raw:"DataGridColDef<T>[]"},description:""},rowId:{required:!0,tsType:{name:"signature",type:"function",raw:"(row: T) => string",signature:{arguments:[{type:{name:"T"},name:"row"}],return:{name:"string"}}},description:""},onRowClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T, e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"T"},name:"row"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},onCellClick:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    cellValue: any,
    row: T,
    col: DataGridColDef<T>,
    e: React.MouseEvent<HTMLDivElement>
) => void`,signature:{arguments:[{type:{name:"any"},name:"cellValue"},{type:{name:"T"},name:"row"},{type:{name:"DataGridColDef",elements:[{name:"T"}],raw:"DataGridColDef<T>"},name:"col"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: T[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"T"}],raw:"T[]"},name:"rows"}],return:{name:"void"}}},description:""},rowHeight:{required:!1,tsType:{name:"number"},description:"@default 40"},headerRowHeight:{required:!1,tsType:{name:"number"},description:""},components:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    settingsIcon?: React.ReactNode;
    moreIcon?: React.ReactNode;
    empty?: React.ReactNode;
    loading?: React.ReactNode;
}`,signature:{properties:[{key:"settingsIcon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"moreIcon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"empty",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"loading",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}},description:""},rowActionCellPopover:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T) => React.ReactNode",signature:{arguments:[{type:{name:"T"},name:"row"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:`Renders an action cell for each row that opens a popover with this content.

Use {@link rowActionCell} to render a custom action cell.`},rowActionCell:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    cellValue: any,
    row: T,
    col: DataGridColDef<T>
) => React.ReactNode`,signature:{arguments:[{type:{name:"any"},name:"cellValue"},{type:{name:"T"},name:"row"},{type:{name:"DataGridColDef",elements:[{name:"T"}],raw:"DataGridColDef<T>"},name:"col"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:`Custom row action cell.

Use {@link rowActionCellPopover} to render a default action cell.`},settings:{required:!1,tsType:{name:"boolean"},description:`Show settings column?
@default true`},defaultHideCols:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:""},selectAll:{required:!1,tsType:{name:"boolean"},description:"Whether to show the select all checkbox when `selectable` is true.\n@default true"},storage:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    /**
     * @default
     * usePersistentState.memoryStorage
     */
    engine?: Storage;
    /**
     * @default
     * React.useId()
     */
    id?: string;
}`,signature:{properties:[{key:"engine",value:{name:"Storage",required:!1},description:`@default
usePersistentState.memoryStorage`},{key:"id",value:{name:"string",required:!1},description:`@default
React.useId()`}]}},description:"The storage to store data grid state. Defaults to memory storage."},baseColDef:{required:!1,tsType:{name:"Partial",elements:[{name:"DataGridColDef",elements:[{name:"T"}],raw:"DataGridColDef<T>"}],raw:"Partial<DataGridColDef<T>>"},description:"Base column definition. All column definitions will be merged with this."}}};export{xe as D};
